'/bootstrap':defAtom(database::'/bootstrap':type).
'/bootstrap':signature(cjs:couchdb(Instance,DB)::database,[Instance::'/bootstrap':string,DB::'/bootstrap':string]).
'/bootstrap':signature(cjs:verifyDatabaseRev(DB,Code,Rev)::'/javascript/statepred':statePred,[DB::database,Code::'/bootstrap':string,Rev::'/bootstrap':string]).
annotation:shrink('/bootstrap':projection(cjs:verifyDatabaseRev(DB,Code,Rev)::'/javascript/statepred':statePred,'/bootstrap':horiz(['/bootstrap':label(!'verify database'),'/bootstrap':vis(DB::database),'/bootstrap':label(!rev),'/bootstrap':vis(Rev::'/bootstrap':string),'/bootstrap':label(!'with program'),'/bootstrap':vis(Code::'/bootstrap':string)]))).
annotation:shrink('/javascript/statepred':clause(cjs:verifyDatabaseRev(cjs:couchdb(Instance,DB),Code,Rev),'/javascript/statepred':conj('/javascript/statepred':if('/cedalionWeb/node':http(!'GET','/javascript/statepred':stateApplyBinOp('/javascript/statepred':expr('/Functional':const(Instance)),'/Functional':concat,'/javascript/statepred':stateApplyBinOp('/javascript/statepred':expr('/Functional':const(! (/))),'/Functional':concat,'/javascript/statepred':expr('/Functional':const(DB)))),'/javascript/jsLogic':jsExpr('/javascript':json([])),'/javascript/statepred':expr('/Functional':const(!'')),200,_,_),'/javascript/statepred':pred(builtin:true),createDatabase('/javascript/statepred':expr('/Functional':const(Instance)),'/javascript/statepred':expr('/Functional':const(DB)))),'/javascript/statepred':if('/javascript/statepred':stateEval('/cedalionWeb/node':string('/cedalionWeb/node':dot('/cedalionWeb/node':json('/cedalionWeb/node':get('/javascript/statepred':expr('/Functional':applyBinOp('/Functional':const(Instance),'/Functional':concat,'/Functional':applyBinOp('/Functional':const(! (/)),'/Functional':concat,'/Functional':applyBinOp('/Functional':const(DB),'/Functional':concat,'/Functional':const(!'/_design/cedalion'))))))),!program_rev)),'/bootstrap':string,Rev),'/javascript/statepred':pred(builtin:true),annotation:shrink(updateDocument('/javascript/statepred':expr('/Functional':const(Instance)),'/javascript/statepred':expr('/Functional':const(DB)),'/javascript/statepred':expr('/Functional':const(!'_design/cedalion')),'/javascript/jsLogic':jsExpr('/javascript':json(annotation:changeMode(['/javascript':bind('/javascript':str(!language),'/javascript':str(!javascript)),'/javascript':bind('/javascript':str(!program_rev),'/javascript/jsLogic':inlineTerm(Rev::'/bootstrap':string)),'/javascript':bind('/javascript':str(!view),'/javascript':json(annotation:changeMode([annotation:shrink('/javascript':bind('/javascript':str(!statements),'/javascript':json(['/javascript':bind('/javascript':str(!map),'/javascript':op('/javascript':str(!'function(doc) {'),'/javascript':plus,'/javascript':op('/javascript/jsLogic':inlineTerm(Code::'/bootstrap':string),'/javascript':plus,'/javascript':str(!'logic.runProcedure(["cjs#couchdbMap", doc.term]);}'))))])))],'/bootstrap':vert)))],'/bootstrap':vert))))))))).
